import{_ as x,N as w,f as r,E as l,r as n,o as d,g as f,a as o,b as t,t as m,w as a,d as h,c as A,k as B,v as T,p as E,e as I,i as M,j as S}from"./NavBar-eaeb7c2f.js";const j={components:{NarBar:w},data(){return{info:{},userinfo:[],imageUrl:"/img/imgUpLoad.png",count:0,name:"",disable:!1,actionUrl:"http://49.232.144.53:8080/userImg"}},computed:{img(){return Object.keys(this.userinfo).length===0||this.userinfo.photo==""?"img/bk.png":"http://49.232.144.53:8080/getimg?img="+this.userinfo.photo},Username(){return Object.keys(this.userinfo).length===0||this.userinfo.name==""?"小可爱":this.userinfo.name}},mounted(){r({method:"GET",url:"http://49.232.144.53:8080/islogin"}).then(e=>{e.data.code==200&&(this.userinfo=e.data.data)}),r({method:"GET",url:"http://49.232.144.53:8080/article/countnumById"}).then(e=>{e.data.code==200&&(this.count=e.data.data)})},methods:{beforeAvatarUpload(e){return console.log(e.type),e.type!=="image/jpeg"?(l.error("图片格式必须为jpeg!"),!1):e.size/1024/1024>2?(l.error("照片大小不能超过2M"),!1):!0},handleAvatarSuccess(){l.success("文件上传成功!"),setTimeout(()=>{location.href=location.href},1500)},ModifyName(){if(this.name=="")return l.error("修改的名字不合法"),!1;this.disable=!0,r({method:"GET",url:"http://49.232.144.53:8080/name?name="+this.name}).then(e=>e.data.code==200?(l.success("修改成功!"),setTimeout(()=>{location.href=location.href},1500),this.disable=!1,!0):(l.error("修改失败!"),this.disable=!1,!1))}}},g=e=>(E("data-v-0c28f2b2"),e=e(),I(),e),C={class:"container"},V={class:"container-left"},G={class:"card"},D=["src"],O=g(()=>t("a",{href:"http:www.github.com"},"github 地址",-1)),P=g(()=>t("div",{class:"counter"},[t("span",null,"文章")],-1)),z={class:"counter"},L={class:"container-right"},q=["src"],H=["disabled"];function J(e,c,Q,R,s,i){const b=n("NarBar"),y=n("h"),k=n("Plus"),U=n("el-icon"),N=n("el-upload"),_=n("el-aside"),p=n("el-container");return d(),f("div",null,[o(b,{img:"/img/bk.png",userinfo:s.userinfo},null,8,["userinfo"]),t("div",C,[t("div",V,[t("div",G,[t("img",{src:i.img,class:"avtar",alt:""},null,8,D),t("h3",null,m(i.Username),1),O,P,t("div",z,[t("span",null,m(s.count),1)])])]),t("div",L,[o(p,null,{default:a(()=>[o(_,null,{default:a(()=>[o(N,{limit:1,"with-credentials":!0,class:"avatar-uploader",action:s.actionUrl,"show-file-list":!1,"on-success":i.handleAvatarSuccess,"before-upload":i.beforeAvatarUpload,name:"img"},{tip:a(()=>[o(y,null,{default:a(()=>[h("图片上传")]),_:1})]),default:a(()=>[s.imageUrl?(d(),f("img",{key:0,src:s.imageUrl,class:"avatar"},null,8,q)):(d(),A(U,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[o(k)]),_:1}))]),_:1},8,["action","on-success","before-upload"])]),_:1})]),_:1}),o(p,null,{default:a(()=>[o(_,null,{default:a(()=>[h(" 请输入要更改的名字:"),B(t("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=u=>s.name=u)},null,512),[[T,s.name,void 0,{trim:!0}]]),t("button",{onClick:c[1]||(c[1]=(...u)=>i.ModifyName&&i.ModifyName(...u)),disabled:s.disable},"确认",8,H)]),_:1})]),_:1})])])])}const K=x(j,[["render",J],["__scopeId","data-v-0c28f2b2"]]);r.defaults.withCredentials=!0;const v=M(K);v.use(S,r);v.mount("#app");
