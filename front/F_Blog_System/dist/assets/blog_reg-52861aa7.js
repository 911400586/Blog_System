import{_ as m,E as r,f as p,o as f,g as _,b as s,k as d,v as l,N as g,r as u,a as c,p as b,e as y,i as S,j as x}from"./NavBar-eaeb7c2f.js";const C={data(){return{username:"",password:"",password2:"",code:"",email:"",isStart:!1,disable:!1}},methods:{verifyCode(){if(this.isStart)return r.error("验证码已经发送,60秒后再试!"),!1;if(this.email==""){r.error("请输入邮箱地址!");return}const i=new URLSearchParams;i.append("email",this.email),this.isStart=!0,p({method:"POST",params:i,url:"http://49.232.144.53:8080/email"}).then(e=>{e.data.code==200?(this.isStart=!0,r.success("验证码发送成功,请注意查收!"),setTimeout(()=>{this.isStart=!1},7e3)):(r.error("验证码发送失败!"),this.isStart=!1)})},submit(i){if(this.username==="")return r.error("请先输入账号"),this.$refs.username.focus(),!1;if(this.password==="")return r.error("请输入密码"),this.$refs.password.focus(),!1;if(this.password2==="")return r.error("请再次入密码"),this.$refs.password2.focus(),!1;if(this.email==="")return r.error("请输入邮箱"),this.$refs.email.focus(),!1;if(this.code===""||this.code.length!=6)return r.error("请输入正确的验证码"),this.$refs.code.focus(),!1;this.disable=!0;const e=new URLSearchParams;e.append("username",this.username),e.append("password",this.password),e.append("email",this.email),e.append("code",this.code),p({url:"http://49.232.144.53:8080/reg",params:e,method:"POST"}).then(a=>{a.data.code==200?(r.success("注册成功!"),setTimeout(()=>{location.href="blog_login.html"},700)):a.data.code==-2?(r.error("该用户已注册!"),this.disable=!1):r.error("验证码错误")}).catch(a=>{r.error("异常错误!"),this.disable=!0})}}},U={class:"login-container"},V={class:"login-dialog"},k=s("h3",null,"注册",-1),B={class:"row"},N=s("span",null,"用户名",-1),R={class:"row"},T=s("span",null,"密码",-1),E={class:"row"},I=s("span",null,"确认密码",-1),P={class:"row"},A=s("span",null,"邮箱",-1),L={class:"row"},M=s("span",null,"验证码",-1),O={class:"row"},j=["disabled"];function D(i,e,a,w,o,n){return f(),_("div",U,[s("div",V,[k,s("div",B,[N,d(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),ref:"username"},null,512),[[l,o.username,void 0,{trim:!0}]])]),s("div",R,[T,d(s("input",{type:"password",id:"password1","onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),ref:"password"},null,512),[[l,o.password,void 0,{trim:!0}]])]),s("div",E,[I,d(s("input",{type:"password",id:"password2","onUpdate:modelValue":e[2]||(e[2]=t=>o.password2=t),ref:"password2"},null,512),[[l,o.password2,void 0,{trim:!0}]])]),s("div",P,[A,d(s("input",{type:"text",id:"email","onUpdate:modelValue":e[3]||(e[3]=t=>o.email=t),ref:"email"},null,512),[[l,o.email,void 0,{trim:!0}]])]),s("div",L,[M,d(s("input",{type:"text",id:"code","onUpdate:modelValue":e[4]||(e[4]=t=>o.code=t),ref:"code"},null,512),[[l,o.code,void 0,{trim:!0}]]),s("button",{onClick:e[5]||(e[5]=(...t)=>n.verifyCode&&n.verifyCode(...t)),style:{width:"70px"}},"发送验证码")]),s("div",O,[s("button",{id:"submit",onClick:e[6]||(e[6]=(...t)=>n.submit&&n.submit(...t)),disabled:o.disable},"提交",8,j)])])])}const G=m(C,[["render",D]]);const $={components:{NarBar:g,Reg:G},data(){return{userinfo:[]}},mounted(){p({method:"GET",url:"http://49.232.144.53:8080/islogin"}).then(i=>{i.data.code==200&&(this.userinfo=i.data.data)})}},q=i=>(b("data-v-e2f628ca"),i=i(),y(),i),z=q(()=>s("div",{class:"space"},null,-1)),F={class:"container"};function H(i,e,a,w,o,n){const t=u("NarBar"),v=u("Reg");return f(),_("div",null,[c(t,{img:"/img/bk.png",userinfo:o.userinfo},null,8,["userinfo"]),z,s("div",F,[c(v)])])}const J=m($,[["render",H],["__scopeId","data-v-e2f628ca"]]);p.defaults.withCredentials=!0;const h=S(J);h.use(x,p);h.mount("#app");
